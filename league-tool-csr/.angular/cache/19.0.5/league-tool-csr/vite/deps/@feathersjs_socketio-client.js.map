{
  "version": 3,
  "sources": ["../../../../../../node_modules/@feathersjs/transport-commons/lib/client.js", "../../../../../../node_modules/@feathersjs/transport-commons/client.js", "../../../../../../node_modules/@feathersjs/socketio-client/lib/index.js"],
  "sourcesContent": ["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Service = void 0;\n/* eslint-disable @typescript-eslint/ban-ts-comment */\nconst errors_1 = require(\"@feathersjs/errors\");\nconst commons_1 = require(\"@feathersjs/commons\");\nconst debug = (0, commons_1.createDebug)('@feathersjs/transport-commons/client');\nconst namespacedEmitterMethods = ['addListener', 'addEventListener', 'emit', 'listenerCount', 'listeners', 'on', 'once', 'prependListener', 'prependOnceListener', 'removeAllListeners', 'removeEventListener', 'removeListener'];\nconst otherEmitterMethods = ['eventNames', 'getMaxListeners', 'setMaxListeners'];\nconst addEmitterMethods = service => {\n  otherEmitterMethods.forEach(method => {\n    service[method] = function (...args) {\n      if (typeof this.connection[method] !== 'function') {\n        throw new Error(`Can not call '${method}' on the client service connection`);\n      }\n      return this.connection[method](...args);\n    };\n  });\n  // Methods that should add the namespace (service path)\n  namespacedEmitterMethods.forEach(method => {\n    service[method] = function (name, ...args) {\n      if (typeof this.connection[method] !== 'function') {\n        throw new Error(`Can not call '${method}' on the client service connection`);\n      }\n      const eventName = `${this.path} ${name}`;\n      debug(`Calling emitter method ${method} with ` + `namespaced event '${eventName}'`);\n      const result = this.connection[method](eventName, ...args);\n      return result === this.connection ? this : result;\n    };\n  });\n};\nclass Service {\n  constructor(options) {\n    this.events = options.events;\n    this.path = options.name;\n    this.connection = options.connection;\n    this.method = options.method;\n    addEmitterMethods(this);\n  }\n  send(method, ...args) {\n    return new Promise((resolve, reject) => {\n      var _a, _b;\n      const route = args.pop();\n      let path = this.path;\n      if (route) {\n        Object.keys(route).forEach(key => {\n          path = path.replace(`:${key}`, route[key]);\n        });\n      }\n      args.unshift(method, path);\n      const socketTimeout = ((_a = this.connection.flags) === null || _a === void 0 ? void 0 : _a.timeout) || ((_b = this.connection._opts) === null || _b === void 0 ? void 0 : _b.ackTimeout);\n      if (socketTimeout !== undefined) {\n        args.push(function (timeoutError, error, data) {\n          return timeoutError || error ? reject((0, errors_1.convert)(timeoutError || error)) : resolve(data);\n        });\n      } else {\n        args.push(function (error, data) {\n          return error ? reject((0, errors_1.convert)(error)) : resolve(data);\n        });\n      }\n      debug(`Sending socket.${this.method}`, args);\n      this.connection[this.method](...args);\n    });\n  }\n  methods(...names) {\n    names.forEach(method => {\n      const _method = `_${method}`;\n      this[_method] = function (data, params = {}) {\n        return this.send(method, data, params.query || {}, params.route || {});\n      };\n      this[method] = function (data, params = {}) {\n        return this[_method](data, params, params.route || {});\n      };\n    });\n    return this;\n  }\n  _find(params = {}) {\n    return this.send('find', params.query || {}, params.route || {});\n  }\n  find(params = {}) {\n    return this._find(params);\n  }\n  _get(id, params = {}) {\n    return this.send('get', id, params.query || {}, params.route || {});\n  }\n  get(id, params = {}) {\n    return this._get(id, params);\n  }\n  _create(data, params = {}) {\n    return this.send('create', data, params.query || {}, params.route || {});\n  }\n  create(data, params = {}) {\n    return this._create(data, params);\n  }\n  _update(id, data, params = {}) {\n    if (typeof id === 'undefined') {\n      return Promise.reject(new Error(\"id for 'update' can not be undefined\"));\n    }\n    return this.send('update', id, data, params.query || {}, params.route || {});\n  }\n  update(id, data, params = {}) {\n    return this._update(id, data, params);\n  }\n  _patch(id, data, params = {}) {\n    return this.send('patch', id, data, params.query || {}, params.route || {});\n  }\n  patch(id, data, params = {}) {\n    return this._patch(id, data, params);\n  }\n  _remove(id, params = {}) {\n    return this.send('remove', id, params.query || {}, params.route || {});\n  }\n  remove(id, params = {}) {\n    return this._remove(id, params);\n  }\n  // `off` is actually not part of the Node event emitter spec\n  // but we are adding it since everybody is expecting it because\n  // of the emitter-component Socket.io is using\n  off(name, ...args) {\n    if (typeof this.connection.off === 'function') {\n      const result = this.connection.off(`${this.path} ${name}`, ...args);\n      return result === this.connection ? this : result;\n    } else if (args.length === 0) {\n      // @ts-ignore\n      return this.removeAllListeners(name);\n    }\n    // @ts-ignore\n    return this.removeListener(name, ...args);\n  }\n}\nexports.Service = Service;\n", "module.exports = require('./lib/client');", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = socketioClient;\nconst client_1 = require(\"@feathersjs/transport-commons/client\");\nconst feathers_1 = require(\"@feathersjs/feathers\");\nfunction socketioClient(connection, options) {\n  if (!connection) {\n    throw new Error('Socket.io connection needs to be provided');\n  }\n  const defaultService = function (name) {\n    const events = Object.values(feathers_1.defaultEventMap);\n    const settings = Object.assign({}, options, {\n      events,\n      name,\n      connection,\n      method: 'emit'\n    });\n    return new client_1.Service(settings);\n  };\n  const initialize = function (app) {\n    if (app.io !== undefined) {\n      throw new Error('Only one default client provider can be configured');\n    }\n    app.io = connection;\n    app.defaultService = defaultService;\n    app.mixins.unshift((service, _location, options) => {\n      if (options && options.methods && service instanceof client_1.Service) {\n        const customMethods = options.methods.filter(name => !feathers_1.defaultServiceMethods.includes(name));\n        service.methods(...customMethods);\n      }\n    });\n  };\n  initialize.Service = client_1.Service;\n  initialize.service = defaultService;\n  return initialize;\n}\nif (typeof module !== 'undefined') {\n  module.exports = Object.assign(socketioClient, module.exports);\n}\n"],
  "mappings": "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",
  "names": ["require_client", "require_lib", "options"]
}
